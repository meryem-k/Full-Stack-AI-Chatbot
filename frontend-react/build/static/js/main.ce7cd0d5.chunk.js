(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,a){},16:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),o=a(5),c=a.n(o),r=(a(15),a(16),a(1));var l=()=>{const[e,t]=Object(n.useState)(""),[a,o]=Object(n.useState)(Object(r.v4)()),[c,l]=Object(n.useState)(!1),[i,u]=Object(n.useState)([]),[m,p]=Object(n.useState)(""),[d,b]=Object(n.useState)(""),[h,f]=Object(n.useState)(null),[E,v]=Object(n.useState)(null),[y,g]=Object(n.useState)(!1),[w,N]=Object(n.useState)(!1),[S,O]=Object(n.useState)(!1),j=Object(n.useRef)(null),P=Object(n.useRef)(null);Object(n.useEffect)(()=>{c&&0===i.length&&u([{user:"",bot:"Hello, welcome to our furniture store. My name is Eve and I am your customer representative. Please let me know how I can help you?"},{user:"",bot:"",options:["Product Information","Submit a Ticket for Damaged Product","Delivery Update","Place an Order"]}])},[c,i.length]),Object(n.useEffect)(()=>{I()},[i]);const C=e=>{const t=e.target.files[0];f(t),v(URL.createObjectURL(t))},T=()=>{l(!c)},k=e=>{P.current&&!P.current.contains(e.target)&&l(!1)};Object(n.useEffect)(()=>(document.addEventListener("mousedown",k),()=>{document.removeEventListener("mousedown",k)}),[]);const I=()=>{j.current&&j.current.scrollIntoView({behavior:"smooth"})};return s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"chat-bubble ".concat(c?"open":""),onClick:T},s.a.createElement("span",{role:"img","aria-label":"chat icon",className:"bubble-icon"},"\ud83d\udcac")),c&&s.a.createElement("div",{className:"chat-window",ref:P},s.a.createElement("div",{className:"chat-header"},s.a.createElement("span",null,"Furniture Store Assistant"),s.a.createElement("button",{className:"close-btn",onClick:T},"\xd7")),s.a.createElement("div",{className:"chat-body"},i.map((e,t)=>s.a.createElement("div",{key:t,className:"chat-message"},e.user&&s.a.createElement("div",{className:"user-message"},e.user),e.bot&&s.a.createElement("div",{className:"bot-response"},e.bot),e.options&&s.a.createElement("div",{className:"options"},e.options.map((e,t)=>s.a.createElement("button",{key:t,onClick:()=>(async e=>{if(u(t=>[...t,{user:e,bot:""}]),"Product Information"===e){const e=await fetch("http://localhost:4000/api/product-information",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:a})}),t=await e.json();u(e=>[...e,{user:"",bot:t.response}])}else if("Submit a Ticket for Damaged Product"===e){const e=await fetch("http://localhost:4000/api/initial-ticket-request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:a})}),t=await e.json();u(e=>[...e,{user:"",bot:t.response}]),g(!0)}else u(t=>[...t,{user:"",bot:'Option "'.concat(e,'" selected. Feature to be implemented.')}])})(e),className:"option-button"},e))))),s.a.createElement("div",{ref:j})),y&&s.a.createElement("form",{onSubmit:async e=>{e.preventDefault(),O(!0);const t=new FormData;t.append("orderNumber",m),t.append("issueDescription",d),t.append("sessionId",a),h&&t.append("photo",h);const n=await fetch("http://localhost:4000/api/submit-ticket",{method:"POST",body:t}),s=await n.json();s.error?u(e=>[...e,{user:"",bot:s.error}]):(u(e=>[...e,{user:"",bot:s.response}]),g(!1),N(!0)),p(""),b(""),f(null),v(null),O(!1)},className:"chat-form"},s.a.createElement("input",{type:"text",value:m,onChange:e=>p(e.target.value),placeholder:"Order Number",className:"chat-input",required:!0}),s.a.createElement("textarea",{value:d,onChange:e=>b(e.target.value),placeholder:"Issue Description",className:"chat-input",required:!0}),s.a.createElement("input",{type:"file",onChange:C,className:"chat-input",accept:"image/*"}),E&&s.a.createElement("img",{src:E,alt:"Preview",className:"photo-preview"}),s.a.createElement("button",{type:"submit",className:"chat-submit",disabled:S},"Submit Ticket")),w&&s.a.createElement("form",{onSubmit:async n=>{n.preventDefault(),O(!0);const s=new FormData;s.append("sessionId",a),s.append("answer",e),h&&s.append("additionalPhoto",h);const o=await fetch("http://localhost:4000/api/submit-additional-info",{method:"POST",body:s}),c=await o.json();c.error?u(e=>[...e,{user:"",bot:c.error}]):(u(t=>[...t,{user:e,bot:c.response}]),N(!0),t(""),f(null),v(null)),O(!1)},className:"chat-form"},s.a.createElement("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Type your answer here",className:"chat-input"}),s.a.createElement("input",{type:"file",name:"additionalPhoto",onChange:C,className:"chat-input",accept:"image/*"}),E&&s.a.createElement("img",{src:E,alt:"Preview",className:"photo-preview"}),s.a.createElement("button",{type:"submit",className:"chat-submit",disabled:S},"Send")),!y&&!w&&s.a.createElement("form",{onSubmit:async n=>{if(n.preventDefault(),O(!0),e.trim()){const n={user:e,bot:""};u(e=>[...e,n]),t("");const s=await fetch("http://localhost:4000/api/product-information-followup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:e,sessionId:a})}),o=await s.json();u(e=>[...e,{user:"",bot:o.response}])}else alert("Please enter a question.");O(!1)},className:"chat-form"},s.a.createElement("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Type your message",className:"chat-input"}),s.a.createElement("button",{type:"submit",className:"chat-submit",disabled:S},"Send")),s.a.createElement("button",{onClick:()=>{o(Object(r.v4)()),u([]),l(!1),t("")},className:"end-session-btn"},"Close Session")))};var i=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,20)).then(t=>{let{getCLS:a,getFID:n,getFCP:s,getLCP:o,getTTFB:c}=t;a(e),n(e),s(e),o(e),c(e)})};c.a.createRoot(document.getElementById("root")).render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(l,null))),i()},6:function(e,t,a){e.exports=a(19)}},[[6,1,2]]]);
//# sourceMappingURL=main.ce7cd0d5.chunk.js.map